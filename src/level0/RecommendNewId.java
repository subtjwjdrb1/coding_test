package level0;

import java.util.List;
import java.util.stream.Collectors;
import java.util.stream.Stream;

//https://programmers.co.kr/learn/courses/30/lessons/72410

public class RecommendNewId {
	public static void main(String[] args) {
		List<String> newIds = Stream.of("...!@BaT#*..y.abcdefghijklm", "z-+.^.", "=.=", "123_.def", "abcdefghijklmn.p").collect(Collectors.toList());
		for(String newId : newIds) {
			System.out.println(solution(newId));
		}
	}
	
	public static String solution(String new_id) {
        //1?‹¨?³? new_id?˜ ?ª¨?“  ?Œ€?¬¸??¥¼ ?Œ€?‘?˜?Š” ??Œë¬¸??¡? ?¹˜í™˜ú±©?‹ˆ?‹¤.
		String answer = new_id.toLowerCase();
		//2?‹¨?³? new_id?—??? ?•Œú¨Œë²³ ??Œë¬¸?, ?ˆ«?, ?¹¼?¸°(-), ?°‘ì¤?(_), ?§ˆì¹¨ú­?(.)?¥¼ ??œì™¸ú±? ?ª¨?“  ?¬¸??¥¼ ??œê±°ú±©?‹ˆ?‹¤.
        answer = answer.replaceAll("[^-_.a-z0-9]","");
        //3?‹¨?³? new_id?—??? ?§ˆì¹¨ú­?(.)?°? 2?²? ?´?ƒ ?—°??ëœ ?¶??¶?„ ú±˜ë‚˜?˜ ?§ˆì¹¨ú­?(.)?¡? ?¹˜í™˜ú±©?‹ˆ?‹¤.
        answer = answer.replaceAll("[.]{2,}",".");
		
        //4?‹¨?³? new_id?—??? ?§ˆì¹¨ú­?(.)?°? ?²˜ìŒ?´?‚˜ ??— ?œ„?¹˜í•œ?‹¤?©´ ??œê±°ú±©?‹ˆ?‹¤.
        answer = answer.replaceAll("^[.]|[.]$","");
    
        //5?‹¨?³? new_id?°? ?¹? ?¬¸??—´?´?¼?©´, new_id?— "a"?¥¼ ?Œ€?…ú±©?‹ˆ?‹¤.
        if(answer.equals("")) {answer+="a";} 
        
        //6?‹¨?³? new_id?˜ ?¸¸?´?°? 16? ?´?ƒ?´?©´, new_id?˜ ?²« 15?°œì˜ ?¬¸??¥¼ ??œì™¸ú±? ?‚˜?¨¸?§? ?¬¸??“¤?„ ?ª¨?‘ ??œê±°ú±©?‹ˆ?‹¤.
        //?§Œì•½ ??œê±° ú·? ?§ˆì¹¨ú­?(.)?°? new_id?˜ ??— ?œ„?¹˜í•œ?‹¤?©´ ??— ?œ„?¹˜í•œ ?§ˆì¹¨ú­?(.) ?¬¸??¥¼ ??œê±°ú±©?‹ˆ?‹¤.
        if(15<answer.length()) {
        	answer = answer.substring(0, 15);
       		answer = answer.replaceAll("^|[.]$","");
        }
        
        //7?‹¨?³? new_id?˜ ?¸¸?´?°? 2? ?´ú±˜ë¼?©´, new_id?˜ ?§ˆì§??§? ?¬¸??¥¼ new_id?˜ ?¸¸?´?°? 3?´ ?  ?•Œ?¹Œì§? ?°˜ë³µú±´??? ??— ?¶™ì…?‹ˆ?‹¤.
        if(answer.length()<3) {
        	for(int i= answer.length(); i < 3; i++) {
        		answer+=answer.charAt(answer.length()-1);
        	}
        }
        
		return answer;
  
    }
}
